{"version":3,"sources":["vanilla/history/index.js"],"names":["window","addEventListener","onLoad","onPopState","routerView","document","querySelector","querySelectorAll","forEach","el","e","preventDefault","history","pushState","getAttribute","location","pathname","innerHTML"],"mappings":";AACAA,OAAOC,iBAAiB,mBAAoBC,GAE5CF,OAAOC,iBAAiB,WAAYE,GAGpC,IAAIC,EAAa,KAEjB,SAASF,IACPE,EAAaC,SAASC,cAAc,+BACpCH,IAGeE,SAASE,iBAAiB,4BAChCC,QAAQ,SAAAC,GAAMA,OAAAA,EAAGR,iBAAiB,QAAS,SAAUS,GAC5DA,EAAEC,iBACFC,QAAQC,UAAU,KAAM,GAAIJ,EAAGK,aAAa,SAC5CX,QAKJ,SAASA,IACCY,OAAAA,SAASC,UACV,IAAA,QAEH,YADAZ,EAAWa,UAAY,iBAEpB,IAAA,SAEH,YADAb,EAAWa,UAAY,kBAEzB,QACE","file":"history.d734b863.map","sourceRoot":"..","sourcesContent":["// 页面加载完不会触发 hashchange，这里主动触发一次 hashchange 事件\nwindow.addEventListener('DOMContentLoaded', onLoad)\n// 监听路由变化\nwindow.addEventListener('popstate', onPopState)\n\n// 路由视图\nvar routerView = null\n\nfunction onLoad () {\n  routerView = document.querySelector('.vanilla_history .container')\n  onPopState()\n\n  // 拦截 <a> 标签点击事件默认行为， 点击时使用 pushState 修改 URL并更新手动 UI，从而实现点击链接更新 URL 和 UI 的效果。\n  var linkList = document.querySelectorAll('.vanilla_history a[href]')\n  linkList.forEach(el => el.addEventListener('click', function (e) {\n    e.preventDefault()\n    history.pushState(null, '', el.getAttribute('href'))\n    onPopState()\n  }))\n}\n\n// 路由变化时，根据路由渲染对应 UI\nfunction onPopState () {\n  switch (location.pathname) {\n    case '/home':\n      routerView.innerHTML = '<h2>Home</h2>'\n      return\n    case '/about':\n      routerView.innerHTML = '<h2>About</h2>'\n      return\n    default:\n      return\n  }\n}"]}